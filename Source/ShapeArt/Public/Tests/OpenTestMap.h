#pragma once

#include "CoreMinimal.h"
#include "Tests/AutomationCommon.h"

UWorld* OpenTestMap(const FString& MapName) {
    AutomationOpenMap(MapName);
    
    const TIndirectArray<FWorldContext>& WorldContexts = GEngine->GetWorldContexts();
    for (const FWorldContext& Context : WorldContexts) {
        if (((Context.WorldType == EWorldType::PIE) || (Context.WorldType == EWorldType::Game))
            && (Context.World() != nullptr)) {
            return Context.World();
        }
    }

    return nullptr;
}
